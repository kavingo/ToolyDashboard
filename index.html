<!DOCTYPE html><html><head>
<meta charset="utf-8"><title>Tooly Dashboard</title>
<style>
body{font-family:system-ui;background:#202225;color:#f1f1f1;padding:40px}
input,button{padding:8px;border-radius:6px;border:none;margin:6px}
section{margin-bottom:32px}
</style></head><body>

<h1>Tooly Dashboard</h1>

<section id="info">üîÑ Loading‚Ä¶</section>

<section>
<h3>Mass DM</h3>
<textarea id="mdm" rows="4" placeholder="Text to DM your friends"></textarea><br>
<button onclick="execCmd('massdm', mdm.value)">Send</button>
</section>

<script>
const token = new URLSearchParams(location.search).get('t');
if(!token){info.textContent='‚ùå no token';throw 'no tok';}

async function execCmd(cmd, args){
  const res = await fetch('/.netlify/functions/exec', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({token, command:cmd, args})
  });
  const j = await res.json();
  info.textContent = j.status === 'ok' ? '‚úÖ Done' : '‚ùå '+j.status;
}
</script>
</body></html>
